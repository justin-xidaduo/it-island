# 🍍 calico flannel 区别

### 实现方式：

calico：使用基于路由的方法实现网络功能。每个容器都有一个唯一的 IP 地址，这些 IP 地址由网络拓扑自动分配。每个节点上都有一个 agent，它负责将路由规则下发到节点的内核。这些规则将每个容器的 IP 地址与对应的容器所在节点的 MAC 地址绑定在一起。这样，当容器之间通信时，流量将被路由到相应的节点，然后被路由到目标容器。Calico 还支持多种路由协议，例如 BGP、OSPF 和 Bird。

Flannel 则使用虚拟网络（overlay network）来实现网络功能。每个节点上都有一个 Flannel agent，它负责创建一个虚拟网络，将每个容器的 IP 地址映射到虚拟网络中的一个唯一的地址。当容器之间通信时，流量会在节点内部转发，然后通过 overlay 网络到达目标容器。Flannel 支持多种 overlay 网络方案，例如 VXLAN、GRE 和 Host-gw。

### 性能

Calico 的性能非常出色，它可以处理大量的网络流量，因为它使用的是基于路由的方法，可以直接利用节点上的硬件路由器来转发流量。此外，Calico 的路由表也非常小，因为每个容器只需要一个路由规则。这使得 Calico 在大规模部署时非常适用。

Flannel 的性能也非常出色，它使用的是 overlay 网络，可以在节点之间透明地传输数据，因此在跨节点通信时表现良好。但是，Flannel 需要维护一个大型的映射表，将容器的 IP 地址映射到虚拟网络中的地址。这会导致映射表的大小随着容器数量的增加而增加，可能会影响性能。

### **配置和部署**

Calico 的配置和部署相对来说比较复杂，因为它需要为每个节点设置路由规则。但是，Calico 有一个很好的优点是可以与 Kubernetes 的 RBAC 机制集成，可以方便地进行权限管理。

Flannel 的配置和部署相对来说比较简单，因为它不需要为每个节点设置路由规则，而是使用 overlay 网络。在 Kubernetes 集群中，只需在每个节点上安装 Flannel agent，然后使用 ConfigMap 或命令行参数配置即可。

### **安全性**

Calico 和 Flannel 都提供了一定程度的安全性。Calico 可以通过网络策略来控制容器之间的通信，Flannel 则使用网络策略来限制容器之间的通信。此外，Calico 还提供了加密和身份验证的功能，可以保护容器间的通信安全。Flannel 则可以与 Kubernetes 的网络策略集成，也可以提供一些安全功能。

### **扩展性**

Calico 的扩展性非常好，因为它使用的是基于路由的方法，可以轻松地与其他路由器和防火墙集成。此外，Calico 还支持多种路由协议，可以与多种网络拓扑结构集成。

Flannel 的扩展性也非常好，因为它使用的是 overlay 网络，可以轻松地跨越多个节点和数据中心。此外，Flannel 还支持多种网络协议，例如 VXLAN、GRE 和 Host-gw，可以轻松地与其他网络设备集成。

Calico 和 Flannel 都是 Kubernetes 中非常流行的网络插件，它们都可以提供网络功能。但是，它们的实现方式和特点有所不同。Calico 使用基于路由的方法实现网络功能，性能非常出色，但配置和部署较为复杂；Flannel 使用虚拟网络来实现网络功能，配置和部署相对简单，但是需要维护一个大型的映射表，可能会影响性能。选择适合自己的网络插件需要根据实际需求进行权衡。
